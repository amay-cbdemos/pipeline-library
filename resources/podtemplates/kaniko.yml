kind: Pod
metadata:
  name: kaniko
spec:
  serviceAccountName: jenkins
  containers:
  - name: kaniko
    image: docker.cb-demos.io/ldonley/kaniko:v0.24
    imagePullPolicy: Always
    command:
    - /busybox/cat
    tty: true
    securityContext:
      runAsUser: 0
      runAsGroup: 0
    volumeMounts:
    - name: docker-config
      mountPath: /kaniko/.docker/
  volumes:
  - name: docker-config
    projected:
      sources:
      - secret:
          name: nexuscred
          items:
           - key: .dockerconfigjson
             path: config.json
  imagePullSecrets:
  - name: nexuscred